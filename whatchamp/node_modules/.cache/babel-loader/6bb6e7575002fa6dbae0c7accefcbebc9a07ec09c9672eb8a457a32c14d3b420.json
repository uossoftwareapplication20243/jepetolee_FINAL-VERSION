{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Box,Typography,Paper,Grid,CircularProgress}from'@mui/material';import{useLocation}from'react-router-dom';import{theme}from'../App';import{cNameMap}from'../const/championsName';import{positions}from'../const/positions';import{Link}from'react-router-dom';import{useQuestionContext}from'../context/questionContext';import{server_url}from'../const/url';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function get_images(champion_en){return`https://ddragon.leagueoflegends.com/cdn/img/champion/splash/${champion_en}_0.jpg`;}function ResultPage(){var _positions$idx;const location=useLocation();const{questionMap,line,username,tag}=useQuestionContext();const idx=line;const[championList,setChampionList]=useState([]);const[loading,setLoading]=useState(true);// Add loading state\nuseEffect(()=>{async function fetchChampionData(){setLoading(true);// Start loading\ntry{const response=await fetch(server_url+`/api/result/${username}/${tag}?line=${line}`,{method:'GET',headers:{'Content-Type':'application/json'}});if(response.status===200){const data=await response.json();setChampionList(data);}else{console.error('Request failed with status:',response.status);}}catch(error){console.error('Error fetching champions:',error);}finally{setLoading(false);// Stop loading\n}}if(username&&tag){fetchChampionData();}},[username,tag,line]);return/*#__PURE__*/_jsx(Box,{sx:{maxWidth:1400,margin:'auto',textAlign:'center',mt:10,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:loading?'center':'flex-start',minHeight:'80vh'},children:loading?/*#__PURE__*/_jsx(CircularProgress,{color:\"secondary\"}):/*#__PURE__*/_jsxs(Box,{sx:{width:'100%'},children:[/*#__PURE__*/_jsx(Link,{to:\"/\",style:{textDecoration:'none',color:'inherit'},children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,sx:{fontWeight:'bold'},children:\"\\uC653\\uCC54?\"})}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",gutterBottom:true,children:[username,\" \",tag]}),/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{backgroundColor:theme.palette.primary.main,color:'white',p:3,mt:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",gutterBottom:true,sx:{fontWeight:'bold'},children:((_positions$idx=positions[idx])===null||_positions$idx===void 0?void 0:_positions$idx.en)||'Position'}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:5,justifyContent:\"center\",children:championList.map((champion,index)=>/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Box,{component:\"img\",mt:3,sx:{width:600,height:350,backgroundColor:index===2?'#6b1b54':'#1e3a5f',borderRadius:2,mb:1},src:get_images(cNameMap[champion].en),alt:champion}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:champion})]},index))})]})]})});}export default ResultPage;","map":{"version":3,"names":["React","useEffect","useState","Box","Typography","Paper","Grid","CircularProgress","useLocation","theme","cNameMap","positions","Link","useQuestionContext","server_url","jsx","_jsx","jsxs","_jsxs","get_images","champion_en","ResultPage","_positions$idx","location","questionMap","line","username","tag","idx","championList","setChampionList","loading","setLoading","fetchChampionData","response","fetch","method","headers","status","data","json","console","error","sx","maxWidth","margin","textAlign","mt","display","flexDirection","alignItems","justifyContent","minHeight","children","color","width","to","style","textDecoration","variant","component","gutterBottom","fontWeight","elevation","backgroundColor","palette","primary","main","p","en","container","spacing","map","champion","index","item","height","borderRadius","mb","src","alt"],"sources":["/home/jepetolee/front_back/whatchamp/src/pages/result_page.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Box, Typography, Paper, Grid, CircularProgress } from '@mui/material';\nimport { useLocation } from 'react-router-dom';\nimport { theme } from '../App';\nimport { cNameMap } from '../const/championsName';\nimport { positions } from '../const/positions';\nimport { Link } from 'react-router-dom';\nimport { useQuestionContext } from '../context/questionContext';\nimport { server_url } from '../const/url';\n\nfunction get_images(champion_en) {\n  return `https://ddragon.leagueoflegends.com/cdn/img/champion/splash/${champion_en}_0.jpg`;\n}\n\nfunction ResultPage() {\n  const location = useLocation();\n  const { questionMap, line, username, tag } = useQuestionContext();\n  const idx = line;\n  const [championList, setChampionList] = useState([]);\n  const [loading, setLoading] = useState(true); // Add loading state\n\n  useEffect(() => {\n    async function fetchChampionData() {\n      setLoading(true); // Start loading\n      try {\n        const response = await fetch(\n          server_url + `/api/result/${username}/${tag}?line=${line}`,\n          { method: 'GET', headers: { 'Content-Type': 'application/json' } }\n        );\n\n        if (response.status === 200) {\n          const data = await response.json();\n          setChampionList(data); \n        } else {\n          console.error('Request failed with status:', response.status);\n        }\n      } catch (error) {\n        console.error('Error fetching champions:', error);\n      } finally {\n        setLoading(false); // Stop loading\n      }\n    }\n\n    if (username && tag) {\n      fetchChampionData();\n    }\n  }, [username, tag, line]);\n\n  return (\n    <Box\n      sx={{\n        maxWidth: 1400,\n        margin: 'auto',\n        textAlign: 'center',\n        mt: 10,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: loading ? 'center' : 'flex-start',\n        minHeight: '80vh',\n      }}\n    >\n      {loading ? (\n        <CircularProgress color=\"secondary\" />\n      ) : (\n        <Box sx={{ width: '100%' }}>\n          <Link to=\"/\" style={{ textDecoration: 'none', color: 'inherit' }}>\n            <Typography variant=\"h4\" component=\"h1\" gutterBottom sx={{ fontWeight: 'bold' }}>\n              왓챔?\n            </Typography>\n          </Link>\n          <Typography variant=\"subtitle1\" gutterBottom>\n            {username} {tag}\n          </Typography>\n          <Paper\n            elevation={3}\n            sx={{\n              backgroundColor: theme.palette.primary.main,\n              color: 'white',\n              p: 3,\n              mt: 3,\n            }}\n          >\n            <Typography variant=\"h3\" gutterBottom sx={{ fontWeight: 'bold' }}>\n              {positions[idx]?.en || 'Position'}\n            </Typography>\n            <Grid container spacing={5} justifyContent=\"center\">\n              {championList.map((champion, index) => (\n                <Grid item key={index}>\n                  <Box\n                    component=\"img\"\n                    mt={3}\n                    sx={{\n                      width: 600,\n                      height: 350,\n                      backgroundColor: index === 2 ? '#6b1b54' : '#1e3a5f',\n                      borderRadius: 2,\n                      mb: 1,\n                    }}\n                    src={get_images(cNameMap[champion].en)}\n                    alt={champion}\n                  />\n                  <Typography variant=\"h5\">{champion}</Typography>\n                </Grid>\n              ))}\n            </Grid>\n          </Paper>\n        </Box>\n      )}\n    </Box>\n  );\n}\n\nexport default ResultPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}